(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[82],{5855:function(e,t,n){Promise.resolve().then(n.bind(n,7406))},7406:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Page}});var a=n(7437),r=n(2265),s=n(2824),l=n(8597),c=n(4434),o=n(704),i=n.n(o),d=n(9600),u=n(1812),p=n.n(u),csvImporter=function(e){let{sendDataToPage:t}=e,[n,s]=(0,r.useState)([]),[l,c]=(0,r.useState)([]),handleFileUpload=async e=>{let t=e.target.files[0];if(!t)return;let n=new FileReader;n.onload=e=>{let t=e.target.result;parseExcelData(t)},n.readAsText(t)},parseExcelData=e=>{p().parse(e,{complete:e=>{if(e.data&&e.data.length>0){let n=e.data.map(e=>e["Group A"]),a=e.data.map(e=>e["Group B"]);s(n),c(a),t({groupA:n,groupB:a})}},header:!0})};return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{children:(0,a.jsx)("input",{type:"file",accept:".csv, .xlsx",onChange:handleFileUpload})})})},h=n(1951),x=n(626),m=n(947),v=n(3661),j=n(2429),g=n.n(j);let b="ITEM",DraggableItem=e=>{let{item:t,index:n,moveItem:r,columnIndex:s}=e,[,l]=(0,h.c)({type:b,item:{index:n,columnIndex:s}}),[,c]=(0,x.L)({accept:b,hover:e=>{(e.index!==n||e.columnIndex!==s)&&(r(e.index,n,e.columnIndex,s),e.index=n,e.columnIndex=s)}});return(0,a.jsx)("div",{ref:e=>l(c(e)),style:{padding:"8px",margin:"4px",border:"1px solid #ccc"},children:t})};var csvMapper=e=>{let{sendDataToDownload:t,csvData:n}=e,s=n.groupA.filter(e=>""!==e&&void 0!==e),l=n.groupB.filter(e=>""!==e&&void 0!==e),[c,o]=(0,r.useState)(s),[i,d]=(0,r.useState)(l),[u,p]=(0,r.useState)(c),[h,x]=(0,r.useState)(i),moveItem=(e,t,n,a)=>{let r=0===n?u:h,s=0===a?u:h,l=r[e];r.splice(e,1),s.splice(t,0,l),p([...u]),x([...h])};return(0,r.useEffect)(()=>{u.length>0&&h.length>0&&t({groupA:u,groupB:h})},[u,h]),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(m.W,{backend:v.PD,children:(0,a.jsx)("div",{className:"wrapper",children:(0,a.jsxs)("table",{className:g()["table-container"],children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Group A"}),(0,a.jsx)("th",{children:"Group B"})]})}),(0,a.jsx)("tbody",{children:u.map((e,t)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsx)(DraggableItem,{item:e,index:t,moveItem:moveItem,columnIndex:0})}),(0,a.jsx)("td",{children:(0,a.jsx)(DraggableItem,{item:h[t],index:t,moveItem:moveItem,columnIndex:1})})]},e))})]})})})})},csvDownload=function(e){let{downloadData:t}=e,[n,s]=(0,r.useState)(t.groupA),[l,c]=(0,r.useState)(t.groupB);return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{children:"download"}),(0,a.jsx)("button",{onClick:()=>{let e=[];e.push(["Group A","Group B"]);let t=Math.max(n.length,l.length);for(let a=0;a<t;a++){let t=[];a<n.length?t.push(n[a]):t.push(""),a<l.length?t.push(l[a]):t.push(""),e.push(t)}let a=p().unparse(e),r=new Blob([a],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a");s.href=URL.createObjectURL(r),s.setAttribute("download","columns.csv"),document.body.appendChild(s),s.click(),document.body.removeChild(s)},children:"Download CSV"})]})})};function Page(){let[e,t]=(0,r.useState)(0),[n,o]=(0,r.useState)(null),[u,p]=(0,r.useState)(null),[h,x]=(0,r.useState)(""),handleNext=()=>{0===e?n?t(1):x("Please import data before proceeding."):1===e&&t(2)},handlePrevious=()=>{1===e?(o(null),t(0)):2===e&&t(1)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"pagetitle",children:[(0,a.jsx)("h1",{children:"Dashboard"}),(0,a.jsx)("nav",{children:(0,a.jsxs)("ol",{className:"breadcrumb",children:[(0,a.jsx)("li",{className:"breadcrumb-item",children:(0,a.jsx)("a",{href:"/",children:"Home"})}),(0,a.jsx)("li",{className:"breadcrumb-item active",children:"CSV Mapping"})]})})]}),(0,a.jsx)(s.Z,{children:(0,a.jsx)(l.Z,{children:(0,a.jsxs)(c.Z,{md:12,children:[(0,a.jsx)(d.Z,{steps:[{title:"Import Csv"},{title:"Mapped Csv"},{title:"Download Csv"}],activeStep:e}),(0,a.jsx)("hr",{}),(0,a.jsxs)("div",{className:"step-content",children:[0===e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(csvImporter,{sendDataToPage:e=>{console.log("Data received:",e),o(e),x("")}}),h&&(0,a.jsx)("p",{className:"error-message",children:h})]}),1===e&&(0,a.jsx)(csvMapper,{sendDataToDownload:e=>{console.log("Data received from mapper:",e),p(e),o(e),x("")},csvData:n}),2===e&&(0,a.jsx)(csvDownload,{downloadData:u})]}),(0,a.jsxs)("div",{className:i()["button-container"],children:[0===e&&(0,a.jsx)("button",{className:i().button,variant:"primary",onClick:handleNext,children:"Next"}),1===e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{className:i().button,variant:"secondary",onClick:handlePrevious,children:"Previous"}),(0,a.jsx)("button",{className:i().button,variant:"primary",onClick:handleNext,children:"Next"})]}),2===e&&(0,a.jsx)("button",{className:i().button,variant:"secondary",onClick:handlePrevious,children:"Previous"})]})]})})})]})}},2429:function(e){e.exports={wrapper:"csvMapper_wrapper__PaJk4","table-container":"csvMapper_table-container__dMF1O"}},704:function(e){e.exports={button:"page_button__UFfc4","button-container":"page_button-container__3oarS",step:"page_step__pYK4u",active:"page_active__Z48Gm",dot:"page_dot__tw_FO"}}},function(e){e.O(0,[89,971,472,744],function(){return e(e.s=5855)}),_N_E=e.O()}]);